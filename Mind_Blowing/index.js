var express=require("express");
var bodyParser=require("body-parser");
var fs = require('fs');
var path=require("path");
var querystring=require("querystring");
var app=express();
app.use(bodyParser.urlencoded({extended:false}));


//The juicy part

app.get("/",function(req,res){
	var filename=req.query.filename;
	if (filename.includes("../")){
		return res.send("No No Sorry");
	}
	else{
		filename=querystring.unescape(filename);
		console.log(querystring.unescape(filename));
		const data = fs.readFileSync(path.normalize("./"+filename), 'utf8');
		return res.send(data);
	}
	
	
});

app.listen(5555);
console.log("Listening on 5555")

